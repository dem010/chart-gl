/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={703:(t,s,i)=>{"use strict";var e=i(414);function a(){}function n(){}n.resetWarningCache=a,t.exports=function(){function t(t,s,i,a,n,h){if(h!==e){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function s(){return t}t.isRequired=t;var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:a};return i.PropTypes=i,i}},697:(t,s,i)=>{t.exports=i(703)()},414:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},251:(t,s,i)=>{"use strict";var e=i(770),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};s.Fragment=n,s.jsx=function(t,s,i){var e,n={},c=null,l=null;for(e in void 0!==i&&(c=""+i),void 0!==s.key&&(c=""+s.key),void 0!==s.ref&&(l=s.ref),s)h.call(s,e)&&!o.hasOwnProperty(e)&&(n[e]=s[e]);if(t&&t.defaultProps)for(e in s=t.defaultProps)void 0===n[e]&&(n[e]=s[e]);return{$$typeof:a,type:t,key:c,ref:l,props:n,_owner:r.current}}},893:(t,s,i)=>{"use strict";t.exports=i(251)},770:t=>{"use strict";t.exports=require(void 0)}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var n=s[e]={exports:{}};return t[e](n,n.exports,i),n.exports}i.n=t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return i.d(s,{a:s}),s},i.d=(t,s)=>{for(var e in s)i.o(s,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})},i.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var e={};(()=>{"use strict";i.r(e),i.d(e,{Area:()=>h,Axis:()=>M,Grid:()=>w,Lines:()=>P,Title:()=>R,useFindNearestPoint:()=>W});var t=i(893),s=i(770),a=i.n(s);const n=a().createContext(null),h=({children:i})=>{const e=(0,s.useRef)(null),[h,r]=(0,s.useState)({options:{container:e,axes:[],areaGrid:{topTitle:"minmax(0, max-content)",leftTitle:"minmax(0, max-content)",rightTitle:"minmax(0, max-content)",bottomTitle:"minmax(0, max-content)",topAxis:"minmax(0, max-content)",leftAxis:"minmax(0, max-content)",rightAxis:"minmax(0, max-content)",bottomAxis:"minmax(0, max-content)"}}}),[o,c]=(0,s.useState)(null);(0,s.useEffect)((()=>{r((t=>Object.assign(Object.assign({},t),{setProp:r,setResizeCanvas:c})))}),[]);const l=a().Children.map(i,(t=>a().isValidElement(t)?a().cloneElement(t,Object.assign(Object.assign({},t.props),{sizeCanvas:o})):t));return(0,t.jsx)(n.Provider,Object.assign({value:h},{children:(0,t.jsx)("div",Object.assign({ref:e,className:"chart-container"},{children:l}))}))};var r=i(697),o=i.n(r);function c(t,s){let i=document.createElement("div");i.style.color=t,document.body.appendChild(i);let e=window.getComputedStyle(i).getPropertyValue("color");document.body.removeChild(i);const[,a,n,h,r]=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||[],o=Math.round(255*(Number(r||1)-s));return`#${Number(a).toString(16)}${Number(n).toString(16)}${Number(h).toString(16)}${o.toString(16)}`}class l{constructor(t,s){this.canvas=t,this.opt=s,this.axes=[],this.color="#555",this.drawVerticalLine=function(t,s,i,e,a){t.fillStyle=a,t.fillRect(s,i,1,e)},this.drawHorizontalLine=function(t,s,i,e,a){t.fillStyle=a,t.fillRect(s,i-.5,e,1)},this.ctx=this.canvas.getContext("2d"),this.resizeCanvasToDisplaySize()}static getInstance(t,s){return l.instance||(l.instance=new l(t,s)),l.instance}addAxis(t){this.axes.includes(t)||this.axes.push(t)}removeAxis(t){this.axes.includes(t)&&this.axes.splice(this.axes.indexOf(t),1)}setColor(t){this.color=t}draw(){if(!this.ctx)return;const t=this.ctx,{width:s,height:i}=this.canvas;t.clearRect(0,0,s,i),this.drawGrid()}drawGrid(){if(!this.ctx)return;const t=this.ctx,{width:s,height:i}=this.canvas;t.beginPath(),this.axes.forEach((e=>{const{ticks:a,translate:n,scale:h,min:r,max:o}=e;if("AxisControlSplit"===e.constructor.name)a.forEach(((o,c)=>o.forEach((o=>{if("y"===e.type){const e=i/a.length,r=i/2-n[c]-o.value*h[c];r>e*c&&r<e*c+e&&this.drawHorizontalLine(t,0,r,s,this.color)}"x"===e.type&&this.drawVerticalLine(t,o.value*h[c]-r[c]*h[c],0,i,this.color)}))));else{const n=-(o[0]-r[0])/2-r[0];a[0].forEach((a=>{"y"===e.type&&this.drawHorizontalLine(t,0,i/2-a.value*h[0]-n*h[0],s,this.color),"x"===e.type&&this.drawVerticalLine(t,a.value*h[0]-r[0]*h[0],0,i,this.color)}))}})),t.fillStyle="#fff",t.strokeStyle="#fff",t.stroke()}update(){this.draw()}resize(t){this.resizeCanvasToDisplaySize(),this.draw()}resizeCanvasToDisplaySize(t){t=t||1;const s=this.canvas.clientWidth*t|0,i=this.canvas.clientHeight*t|0;return(this.canvas.width!==s||this.canvas.height!==i)&&(this.canvas.width=s,this.canvas.height=i,!0)}}const d=.07;class u{constructor(t,{align:s,type:i,domain:e,format:a,chartProperties:n,split:h,style:r}){this.ctx=null,this.min=[],this.max=[],this.maxWidth=100,this.axisSeries=[],this.ticks=[[]],this.scale=[1],this.translate=[0],this.canvas=t,this.ctx=t.getContext("2d"),this.type=i,this.axisOptions={align:s,type:i,domain:e,format:a,style:r},n.chart&&(this.chart=n.chart,this.chartOptions=this.chart.options)}destroy(){this.ctx=null,this.axisOptions.format=void 0,this.chart&&this.chart.axesMatricesCtrl.forEach((t=>t.reset(this.type)),this.type,this.axisOptions.align),this.chart=void 0,this.chartOptions&&this.chartOptions.overlay&&this.chartOptions.overlay.removeAxis(this),this.chartOptions&&this.chartOptions.axes.includes(this)&&this.chartOptions.axes.splice(this.chartOptions.axes.indexOf(this),1),this.chartOptions=void 0}setAxisSize(){if(!this.chartOptions||!this.chart)return;const{align:t}=this.axisOptions,{container:s,areaGrid:i}=this.chartOptions,e=this.chart.getGL();if(!e)return;let a=0;if("y"===this.type&&(this.ticks[0].forEach((t=>a=Math.max(a,Math.round(t.metrics.width)))),this.canvas.width=a+10,this.maxWidth=a+10,s.current&&("left"===t&&(i.leftAxis=this.maxWidth+"px"),"right"===t&&(i.rightAxis=this.maxWidth+"px"),this.canvas.parentElement&&(this.canvas.parentElement.style.width=this.maxWidth+"px"),this.canvas.height=e.canvas.height)),"x"===this.type&&(this.ticks[0].forEach((t=>{const s=t.formattedValue.length,i=t.metrics;a=Math.max((i.fontBoundingBoxAscent+i.fontBoundingBoxDescent)*s,a)})),this.canvas.height=a+20,this.maxWidth=a+20,s.current)){let a=parseInt(this.chartOptions.areaGrid.leftAxis);a=isNaN(a)?0:a,"top"===t&&(i.topAxis=this.maxWidth+"px"),"bottom"===t&&(i.bottomAxis=this.maxWidth+"px"),s.current.style.gridTemplateRows=`${i.topTitle} ${i.topAxis} auto ${i.bottomAxis} ${i.bottomTitle}`,this.canvas.parentElement&&(this.canvas.parentElement.style.height=this.maxWidth+"px"),this.canvas.width=e.canvas.width+a}}drawAxis(){"y"===this.type&&this.drawYAxis(),"x"===this.type&&this.drawXAxis()}drawXAxis(){if(!this.chartOptions||!this.chart)return;const t=this.chart.getGL();if(!t)return;const{align:s}=this.axisOptions;let i=t.canvas.width,e=parseInt(this.chartOptions.areaGrid.leftAxis);e=isNaN(e)?0:e;const a=this.ctx;a&&(a.clearRect(0,0,this.canvas.width,this.canvas.height),a.beginPath(),a.moveTo(e-1,"bottom"===s?0:this.maxWidth),a.lineTo(i+e+1,"bottom"===s?0:this.maxWidth),a.lineWidth=1,a.font=this.getFont(),a.textAlign="center",a.fillStyle=this.axisOptions.style.color,this.ticks[0].forEach((t=>{t.value*this.scale[0]-this.min[0]*this.scale[0]+e>e-2&&(a.moveTo(t.value*this.scale[0]-this.min[0]*this.scale[0]+e+.5,"bottom"===s?0:this.maxWidth),a.lineTo(t.value*this.scale[0]-this.min[0]*this.scale[0]+e+.5,"bottom"===s?6:this.maxWidth-6),this.drawAxisText(a,t.formattedValue,t.value*this.scale[0]-this.min[0]*this.scale[0]+e,"bottom"===s?t.metrics.fontBoundingBoxAscent+t.metrics.fontBoundingBoxDescent+this.axisOptions.style.tickOffset:this.maxWidth-10,t.metrics.fontBoundingBoxAscent+t.metrics.fontBoundingBoxDescent))})),a.strokeStyle=this.axisOptions.style.color,a.stroke())}drawYAxis(){}drawAxisText(t,s,i,e,a){for(const[n,h]of s.entries())t.fillText(h,i,e+n*a)}resizeCanvasToDisplaySize(t){t=t||1;const s=this.canvas.clientWidth*t|0,i=this.canvas.clientHeight*t|0;return(this.canvas.width!==s||this.canvas.height!==i)&&(this.canvas.width=s,this.canvas.height=i,!0)}format(t){const{format:s}=this.axisOptions;return s?s(t).split("\n"):[t.toString()]}resize(t){t&&window.requestAnimationFrame((()=>{this.resizeCanvasToDisplaySize(),this.tuneTickGenerator(),this.drawAxis(),this.chartOptions&&this.chartOptions.overlay&&this.chartOptions.overlay.resize(t)}))}createGrid(t,s){if(this.chartOptions){const i=l.getInstance(t,this.chartOptions);return i.addAxis(this),i.setColor(s),this.chartOptions.overlay=i,i}return null}tuneTickGenerator(){}tickGenerator(t,s,i){const e=[],a=i*Math.floor(t/i);let n,h=0,r=Number.NaN;do{n=r,r=a+h*i;const t=Number(r.toPrecision(12)),s=this.format(t);let o;s.forEach((t=>{if(!this.ctx)return;const s=this.ctx.measureText(t);(!o||o.width<s.width)&&(o=s)})),o&&e.push({value:t,formattedValue:s,metrics:o}),++h}while(r<s&&r!==n);return e}getMatrix(t){return this.chart?this.chart.axesMatricesCtrl.series[t.refX+t.refY+t.id]:null}update(){}getFont(){return this.axisOptions?`${this.axisOptions.style.fontSize}px ${this.axisOptions.style.font}`:"14px calibri, serif"}}class m extends u{constructor(t,{align:s,type:i,domain:e,format:a,style:n,chartProperties:h}){super(t,{align:s,type:i,domain:e,format:a,style:n,chartProperties:h}),this.chartOptions&&this.chartOptions.axes.push(this),this.min=[],this.max=[],this.scale=[],this.translate=[],this.setOptionsParameters(),this.tuneTickGenerator(),this.resizeCanvasToDisplaySize(),this.setVisibilityArea(),this.drawAxis(),h.setProp&&h.setProp(Object.assign({},h)),this.disablePan()}disablePan(){const{type:t,align:s}=this.axisOptions;this.chart&&this.chart.axesMatricesCtrl.forEach((s=>s.disable(t,!0)),t,s)}setOptionsParameters(){if(!this.chartOptions)return;const{series:t}=this.chartOptions,{type:s,align:i}=this.axisOptions;if(t){this.type=s;for(let s of t)s.refY!==i&&s.refX!==i||(this.axisSeries.push(s),this.min.push("x"===this.type?s.data.minmaxX.min:s.data.minmaxY.min-Math.abs(s.data.minmaxY.max-s.data.minmaxY.min)*d),this.max.push("x"===this.type?s.data.minmaxX.max:s.data.minmaxY.max+Math.abs(s.data.minmaxY.max-s.data.minmaxY.min)*d))}}setAxisSize(){if(!this.chartOptions||!this.chart)return;const t=this.chart.getGL();if(!t)return;const{align:s}=this.axisOptions,{container:i,areaGrid:e}=this.chartOptions;let a=0;if("y"===this.type&&(this.ticks.forEach((t=>t.forEach((t=>a=Math.max(a,Math.round(t.metrics.width)))))),this.canvas.width=a+10,this.maxWidth=a+10,i.current&&("left"===s&&(e.leftAxis=this.maxWidth+"px"),"right"===s&&(e.rightAxis=this.maxWidth+"px"),this.canvas.parentElement&&(this.canvas.parentElement.style.width=this.maxWidth+"px"),this.canvas.height=t.canvas.height)),"x"===this.type&&(this.ticks.forEach((t=>t.forEach((t=>{const s=t.formattedValue.length,i=t.metrics;a=Math.max((i.fontBoundingBoxAscent+i.fontBoundingBoxDescent)*s,a)})))),this.canvas.height=a+20,this.maxWidth=a+20,i.current)){let a=parseInt(this.chartOptions.areaGrid.leftAxis);a=isNaN(a)?0:a,"top"===s&&(e.topAxis=this.maxWidth+"px"),"bottom"===s&&(e.bottomAxis=this.maxWidth+"px"),i.current.style.gridTemplateRows=`${e.topTitle} ${e.topAxis} auto ${e.bottomAxis} ${e.bottomTitle}`,this.canvas.parentElement&&(this.canvas.parentElement.style.height=this.maxWidth+"px"),this.canvas.width=t.canvas.width+a}}tuneTickGenerator(){const{type:t,canvas:s}=this,i=s.width/this.axisSeries.length,e=s.height/this.axisSeries.length,a=.3*Math.sqrt("x"===t?i:e);for(let[t,s]of this.axisSeries.entries()){const i=this.getMatrix(s),e=(null==i?void 0:i.minY)||this.min[t],n=(null==i?void 0:i.maxY)||this.max[t],h=(n-e)/a;let r=-Math.floor(Math.log(h)/Math.LN10);const o=Math.pow(10,-r),c=h/o;let l;c<1.5?l=1:c<3?(l=2,c>2.25&&r+1<=3&&(l=2.5,++r)):l=c<7.5?5:10,l*=o,this.ticks[t]=this.tickGenerator(e,n,l)}this.setAxisSize()}update(){const{type:t}=this;for(let[s,i]of this.axisSeries.entries()){const e=this.getMatrix(i);if(!e)continue;let{translateY:a,scaleX:n,scaleY:h,minY:r,maxY:o,originY:c}=e.getTransformData();n&&"x"===t&&(this.scale[s]=n),h&&"y"===t&&(this.scale[s]=h,this.translate[s]=a+c,this.min[s]=r,this.max[s]=o)}window.requestAnimationFrame((()=>{this.tuneTickGenerator(),this.drawAxis(),this.chartOptions&&this.chartOptions.overlay&&this.chartOptions.overlay.update()}))}setVisibilityArea(){if(!this.chart)return;const t=this.chart.getGL();if(!t)return;let s=t.canvas.height;s/=this.axisSeries.length,this.axisSeries.forEach(((t,i)=>{let e,a;"y"===this.type&&(this.scale[i]=e=s/(this.max[i]-this.min[i]),this.translate[i]=a=(-(this.max[i]-this.min[i])/2-this.min[i])*e+s*(this.axisSeries.length/2)+s/2-s*(i+1));let n=this.getMatrix(t);n&&(n.scale(void 0,e,0,0),n.translate(void 0,a),n.setAxisSeries(this.axisSeries,i),n.setAutoScaleY(!0),n.recalculateMinMax())}))}drawYAxis(){if(!this.chart||!this.ctx)return;const t=this.chart.getGL();if(!t)return;const{align:s}=this.axisOptions;let i=t.canvas.height;i/=this.axisSeries.length;const e=this.ctx;e.clearRect(0,0,this.canvas.width,this.canvas.height);for(let[t]of this.axisSeries.entries())e.fillStyle=t%2?"#00000022":"#00000000",e.fillRect(0,i*t,this.maxWidth,i);for(let[a]of this.axisSeries.entries())e.beginPath(),e.fillStyle=a%2?this.axisOptions.style.color:c(this.axisOptions.style.color,.2),e.lineWidth=a%2?2:1,e.moveTo("left"===s?this.maxWidth-.5:0,i*a),e.lineTo("left"===s?this.maxWidth-.5:0,i*a+i),e.font=this.getFont(),e.textAlign="left"===s?"end":"start",this.ticks[a].forEach((n=>{const h=n.formattedValue.length,r=t.canvas.height/2-this.translate[a]-n.value*this.scale[a];(r>i*a&&!a||r>i*a+n.metrics.fontBoundingBoxAscent)&&r<i*a+i&&(e.moveTo("left"===s?this.maxWidth:0,r-.5),e.lineTo("left"===s?this.maxWidth-6:6,r-.5),this.drawAxisText(e,n.formattedValue,"left"===s?this.maxWidth-6-this.axisOptions.style.tickOffset:6+this.axisOptions.style.tickOffset,r+(n.metrics.fontBoundingBoxAscent-n.metrics.fontBoundingBoxDescent)/2*h,n.metrics.fontBoundingBoxAscent+n.metrics.fontBoundingBoxDescent))})),e.strokeStyle=a%2?this.axisOptions.style.color:c(this.axisOptions.style.color,.2),e.stroke()}}class x{constructor(t,s){this.isTranslate=!1,this.mouseStartTranslate=[0,0],this.prevCenter=0,this.prevDistance=1,this.chart=t,this.matricesCtrl=s}destroy(){this.unbindHandlers()}unbindHandlers(){}panStart({clientX:t,clientY:s}){this.isTranslate=!0,this.mouseStartTranslate=[t,s]}pan({clientX:t,clientY:s},i,e){this.matricesCtrl.forEach((i=>{i.move(t-this.mouseStartTranslate[0],s-this.mouseStartTranslate[1])}),i,e)}panEnd({clientX:t,clientY:s},i,e){this.isTranslate=!1,this.matricesCtrl.forEach((i=>i.stopmove(t-this.mouseStartTranslate[0],s-this.mouseStartTranslate[1])),i,e)}scaleStart(t){this.prevDistance=p(t),this.prevCenter=f(t,this.chart.canvas.offsetLeft)}scaleTo(t){const s=this.chart.canvas.offsetLeft,i=p(t),e=i/this.prevDistance,a=f(t,s);this.matricesCtrl.forEach((t=>t.touchScale(e,a,a-this.prevCenter))),this.prevDistance=i,this.prevCenter=a}scaleStop(t){const s=f(t,this.chart.canvas.offsetLeft);this.matricesCtrl.forEach((t=>t.stopmove(s-this.prevCenter,0)))}}function p(t){return Math.abs(t[0].clientX-t[1].clientX)}function f(t,s){return(t[0].clientX-s+t[1].clientX-s)/2}class v extends x{constructor(t,s){super(s,s.axesMatricesCtrl),this.offset=new DOMRect(0,0,0,0),this.axis=t,this.canvas=t.canvas,this.type=t.type,this.bindHandlers()}bindHandlers(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.handlerWheel=this.handlerWheel.bind(this),this.handlerTouchStart=this.handlerTouchStart.bind(this),this.handlerTouchMove=this.handlerTouchMove.bind(this),this.handlerTouchEnd=this.handlerTouchEnd.bind(this),this.canvas.addEventListener("mousedown",this.onMouseDown),this.canvas.addEventListener("wheel",this.handlerWheel),this.canvas.addEventListener("touchstart",this.handlerTouchStart),this.canvas.addEventListener("touchmove",this.handlerTouchMove),this.canvas.addEventListener("touchend",this.handlerTouchEnd),this.offset=this.canvas.getBoundingClientRect()}unbindHandlers(){this.canvas.removeEventListener("mousedown",this.onMouseDown),this.canvas.removeEventListener("wheel",this.handlerWheel),this.canvas.removeEventListener("touchstart",this.handlerTouchStart),this.canvas.removeEventListener("touchmove",this.handlerTouchMove),this.canvas.removeEventListener("touchend",this.handlerTouchEnd)}onMouseDown(t){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),this.panStart({clientX:"x"===this.type?t.pageX-this.offset.left:0,clientY:"y"===this.type?t.pageY-this.offset.top:0})}onMouseMove(t){this.isTranslate&&(this.pan({clientX:"x"===this.type?t.pageX-this.offset.left:0,clientY:"y"===this.type?t.pageY-this.offset.top:0},this.axis.type,this.axis.axisOptions.align),this.axis.update())}onMouseUp(t){this.isTranslate&&(this.panEnd({clientX:"x"===this.type?t.pageX-this.offset.left:0,clientY:"y"===this.type?t.pageY-this.offset.top:0},this.axis.type,this.axis.axisOptions.align),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp))}handlerWheel(t){let s=parseInt(this.chart.options.areaGrid.leftAxis);s=isNaN(s)?0:s,t.deltaY>0?(this.matricesCtrl.forEach((i=>i.zoomOut("x"===this.type?.1:0,"y"===this.type?.1:0,t.pageX-this.offset.left-s,t.pageY-this.offset.top-this.chart.canvas.height/2)),this.axis.type,this.axis.axisOptions.align),this.axis.update()):(this.matricesCtrl.forEach((i=>i.zoomIn("x"===this.type?.1:0,"y"===this.type?.1:0,t.pageX-this.offset.left-s,t.pageY-this.offset.top-this.chart.canvas.height/2)),this.axis.type,this.axis.axisOptions.align),this.axis.update())}handlerTouchStart(t){const s={clientX:"x"===this.type?t.touches[0].clientX:0,clientY:"y"===this.type?t.touches[0].clientY:0};1===t.touches.length&&this.panStart(s),t.touches.length>1&&this.panEnd(s,this.axis.type,this.axis.axisOptions.align)}handlerTouchMove(t){t.touches.length>0&&(this.isTranslate&&1===t.touches.length&&this.pan({clientX:"x"===this.type?t.touches[0].clientX:0,clientY:"y"===this.type?t.touches[0].clientY:0},this.axis.type,this.axis.axisOptions.align),this.axis.update())}handlerTouchEnd(t){this.isTranslate&&1===t.changedTouches.length&&this.panEnd({clientX:"x"===this.type?t.changedTouches[0].clientX:0,clientY:"y"===this.type?t.changedTouches[0].clientY:0},this.axis.type,this.axis.axisOptions.align)}}class g extends u{constructor(t,{align:s,type:i,domain:e,format:a,style:n,chartProperties:h}){super(t,{align:s,type:i,domain:e,format:a,style:n,chartProperties:h}),this.chartOptions&&this.chartOptions.axes.push(this),this.setOptionsParameters(),this.tuneTickGenerator(),this.resizeCanvasToDisplaySize(),this.setVisibilityArea(),this.drawAxis(),this.chart&&new v(this,this.chart),h.setProp&&h.setProp(Object.assign({},h)),this.enablePan()}enablePan(){const{type:t,align:s}=this.axisOptions;this.chart&&this.chart.axesMatricesCtrl.forEach((s=>s.disable(t,!1)),t,s)}setOptionsParameters(){if(!this.chartOptions)return;const t=this.chartOptions.series;if(!t)return;const{domain:s,type:i,align:e}=this.axisOptions;let a=t[0].data.minmaxX.min,n=t[0].data.minmaxX.max,h=t[0].data.minmaxY.min,r=t[0].data.minmaxY.max;if(t.length>1)for(let s of t)s.refY!==e&&s.refX!==e||(a=Math.min(s.data.minmaxX.min,a),h=Math.min(s.data.minmaxY.min,h),n=Math.max(s.data.minmaxX.max,n),r=Math.max(s.data.minmaxY.max,r));"x"===i&&(this.min=[s?s[0]:a],this.max=[s?s[1]:n]),"y"===i&&(this.min=[s?s[0]:h-Math.abs(r-h)*d],this.max=[s?s[1]:r+Math.abs(r-h)*d])}setVisibilityArea(){if(!this.chart)return;const t=this.chart.getGL();if(!t)return;let s,i,e,a,n=t.canvas.width,h=t.canvas.height;"x"===this.type&&(s=n/(this.max[0]-this.min[0]),this.scale=[s],e=-this.min[0]+(this.min[0]/this.scale[0]-this.min[0])*s),"y"===this.type&&(i=h/(this.max[0]-this.min[0]),this.scale=[i],a=(-(this.max[0]-this.min[0])/2-this.min[0])*i),this.chart.axesMatricesCtrl.forEach((t=>t.scale(s,i,0,0)),this.type,this.axisOptions.align),this.chart.axesMatricesCtrl.forEach((t=>t.translate(e,a)),this.type,this.axisOptions.align)}drawYAxis(){if(!this.chart)return;const t=this.chart.getGL();if(!t)return;const{align:s}=this.axisOptions;let i=t.canvas.height;const e=-(this.max[0]-this.min[0])/2-this.min[0];if(!this.ctx)return;const a=this.ctx;a.clearRect(0,0,this.canvas.width,this.canvas.height),a.beginPath(),a.moveTo("left"===s?this.maxWidth:0,0),a.lineWidth=1,a.lineTo("left"===s?this.maxWidth:0,i),a.font=this.getFont(),a.textAlign="left"===s?"end":"start",a.fillStyle=this.axisOptions.style.color,this.ticks[0].forEach((t=>{a.moveTo("left"===s?this.maxWidth:0,i/2-t.value*this.scale[0]-e*this.scale[0]+.5),a.lineTo("left"===s?this.maxWidth-6:6,i/2-t.value*this.scale[0]-e*this.scale[0]+.5);const n=t.formattedValue.length;this.drawAxisText(a,t.formattedValue,"left"===s?this.maxWidth-6-this.axisOptions.style.tickOffset:6+this.axisOptions.style.tickOffset,t.metrics.fontBoundingBoxAscent+i/2-t.value*this.scale[0]-e*this.scale[0]-(t.metrics.fontBoundingBoxAscent+t.metrics.fontBoundingBoxDescent)/2*n,t.metrics.fontBoundingBoxAscent+t.metrics.fontBoundingBoxDescent)})),a.strokeStyle=this.axisOptions.style.color,a.stroke()}tuneTickGenerator(){const{type:t,min:s,max:i,canvas:{width:e,height:a}}=this,n=.3*Math.sqrt("x"===t?e:a),h=(i[0]-s[0])/n;let r=-Math.floor(Math.log(h)/Math.LN10);const o=Math.pow(10,-r),c=h/o;let l;c<1.5?l=1:c<3?(l=2,c>2.25&&r+1<=3&&(l=2.5,++r)):l=c<7.5?5:10,l*=o,this.ticks=[this.tickGenerator(this.min[0],this.max[0],l)],this.setAxisSize()}update(){if(!this.chart)return;const t=this.chart.getGL(),s=this.chart.axesMatricesCtrl.getOneAxis(this.type,this.axisOptions.align);if(!s||!t)return;const{translateX:i,translateY:e,scaleX:a,scaleY:n,originX:h,originY:r}=s.getTransformData(),{type:o,canvas:{width:c,height:l}}=this;"number"==typeof i&&a&&"x"===o&&(this.scale=[a],this.min=[-i/this.scale[0]-h/this.scale[0]],this.max=[this.min[0]+c/this.scale[0]]),"number"==typeof e&&n&&"y"===o&&(this.scale=[n],this.min=[-e/this.scale[0]-(r+t.canvas.clientHeight/2)/this.scale[0]],this.max=[this.min[0]+l/this.scale[0]]),window.requestAnimationFrame((()=>{this.tuneTickGenerator(),this.drawAxis(),this.chartOptions&&this.chartOptions.overlay&&this.chartOptions.overlay.update()}))}}const y=({align:i="bottom",domain:e,sizeCanvas:a,format:h,split:r=!1,font:o="calibri, serif",fontSize:c=14,color:l="#fff",tickOffset:d=3})=>{const u=(0,s.useContext)(n),x=null==u?void 0:u.chart,p=null==u?void 0:u.options.series,f=(0,s.useRef)(null),[v,y]=(0,s.useState)(null);return(0,s.useLayoutEffect)((()=>{f.current&&p&&x&&(v&&v.destroy(),y(r?new m(f.current,{chartProperties:u,domain:e,type:"bottom"===i||"top"===i?"x":"y",align:i,format:h,style:{font:o,fontSize:c,color:l,tickOffset:d}}):new g(f.current,{chartProperties:u,domain:e,type:"bottom"===i||"top"===i?"x":"y",align:i,format:h,style:{font:o,fontSize:c,color:l,tickOffset:d}})))}),[x,p,r]),(0,s.useEffect)((()=>{v&&v.resize(a)}),[v,a]),(0,t.jsx)("div",Object.assign({className:`chart-${i}-axis chart-axis`},{children:(0,t.jsx)("canvas",{ref:f})}))};y.defaultProps={align:"bottom",split:!1},y.propTypes={align:o().oneOf(["top","left","bottom","right"]).isRequired,split:o().bool};const M=y,b=({color:i="#555",refY:e="left",refX:a="bottom"})=>{const h=(0,s.useRef)(null),r=(0,s.useContext)(n),[o,c]=(0,s.useState)(null);return(0,s.useEffect)((()=>{h.current&&r&&r.options.axes.length&&r.options.axes.forEach((t=>{t.axisOptions.align!==e&&t.axisOptions.align!==a||c(t.createGrid(h.current,i))}))}),[h,r,i]),(0,s.useEffect)((()=>{o&&r&&r.setProp&&r.setProp((t=>Object.assign({},t)))}),[o]),(0,t.jsx)("div",Object.assign({className:"chart-grid-canvas"},{children:(0,t.jsx)("canvas",{ref:h,id:"chart-grid",style:{width:"100%",height:"100%",position:"absolute"}})}))};b.defaultProps={color:"#555",refY:"left",refX:"bottom"},b.propTypes={color:o().string,refX:o().oneOf(["bottom","top"]),refY:o().oneOf(["left","right"])};const w=b;var T;const S=((T=class{static multiply(t,s,i){i=i||new this.MatType(16);var e=s[0],a=s[1],n=s[2],h=s[3],r=s[4],o=s[5],c=s[6],l=s[7],d=s[8],u=s[9],m=s[10],x=s[11],p=s[12],f=s[13],v=s[14],g=s[15],y=t[0],M=t[1],b=t[2],w=t[3],T=t[4],S=t[5],O=t[6],E=t[7],Y=t[8],A=t[9],C=t[10],X=t[11],L=t[12],P=t[13],D=t[14],R=t[15];return i[0]=e*y+a*T+n*Y+h*L,i[1]=e*M+a*S+n*A+h*P,i[2]=e*b+a*O+n*C+h*D,i[3]=e*w+a*E+n*X+h*R,i[4]=r*y+o*T+c*Y+l*L,i[5]=r*M+o*S+c*A+l*P,i[6]=r*b+o*O+c*C+l*D,i[7]=r*w+o*E+c*X+l*R,i[8]=d*y+u*T+m*Y+x*L,i[9]=d*M+u*S+m*A+x*P,i[10]=d*b+u*O+m*C+x*D,i[11]=d*w+u*E+m*X+x*R,i[12]=p*y+f*T+v*Y+g*L,i[13]=p*M+f*S+v*A+g*P,i[14]=p*b+f*O+v*C+g*D,i[15]=p*w+f*E+v*X+g*R,i}static addVectors(t,s,i){return(i=i||new this.MatType(3))[0]=t[0]+s[0],i[1]=t[1]+s[1],i[2]=t[2]+s[2],i}static subtractVectors(t,s,i){return(i=i||new this.MatType(3))[0]=t[0]-s[0],i[1]=t[1]-s[1],i[2]=t[2]-s[2],i}static scaleVector(t,s,i){return(i=i||new this.MatType(3))[0]=t[0]*s,i[1]=t[1]*s,i[2]=t[2]*s,i}static normalize(t,s){s=s||new this.MatType(3);var i=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return i>1e-5&&(s[0]=t[0]/i,s[1]=t[1]/i,s[2]=t[2]/i),s}static mLength(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}static lengthSq(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}static cross(t,s,i){return(i=i||new this.MatType(3))[0]=t[1]*s[2]-t[2]*s[1],i[1]=t[2]*s[0]-t[0]*s[2],i[2]=t[0]*s[1]-t[1]*s[0],i}static dot(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]}static distanceSq(t,s){const i=t[0]-s[0],e=t[1]-s[1],a=t[2]-s[2];return i*i+e*e+a*a}static distance(t,s){return Math.sqrt(this.distanceSq(t,s))}static identity(t){return(t=t||new this.MatType(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static transpose(t,s){return(s=s||new this.MatType(16))[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15],s}static lookAt(t,s,i,e){e=e||new this.MatType(16);var a=this.normalize(this.subtractVectors(t,s)),n=this.normalize(this.cross(i,a)),h=this.normalize(this.cross(a,n));return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=0,e[4]=h[0],e[5]=h[1],e[6]=h[2],e[7]=0,e[8]=a[0],e[9]=a[1],e[10]=a[2],e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}static perspective(t,s,i,e,a){a=a||new this.MatType(16);var n=Math.tan(.5*Math.PI-.5*t),h=1/(i-e);return a[0]=n/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(i+e)*h,a[11]=-1,a[12]=0,a[13]=0,a[14]=i*e*h*2,a[15]=0,a}static orthographic(t,s,i,e,a,n,h){return(h=h||new this.MatType(16))[0]=2/(s-t),h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=2/(e-i),h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2/(a-n),h[11]=0,h[12]=(t+s)/(t-s),h[13]=(i+e)/(i-e),h[14]=(a+n)/(a-n),h[15]=1,h}static frustum(t,s,i,e,a,n,h){var r=s-t,o=e-i,c=n-a;return(h=h||new this.MatType(16))[0]=2*a/r,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=2*a/o,h[6]=0,h[7]=0,h[8]=(t+s)/r,h[9]=(e+i)/o,h[10]=-(n+a)/c,h[11]=-1,h[12]=0,h[13]=0,h[14]=-2*a*n/c,h[15]=0,h}static translation(t,s,i,e){return(e=e||new this.MatType(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t,e[13]=s,e[14]=i,e[15]=1,e}static translate(t,s,i,e,a){a=a||new this.MatType(16);var n=t[0],h=t[1],r=t[2],o=t[3],c=t[4],l=t[5],d=t[6],u=t[7],m=t[8],x=t[9],p=t[10],f=t[11],v=t[12],g=t[13],y=t[14],M=t[15];return t!==a&&(a[0]=n,a[1]=h,a[2]=r,a[3]=o,a[4]=c,a[5]=l,a[6]=d,a[7]=u,a[8]=m,a[9]=x,a[10]=p,a[11]=f),a[12]=n*s+c*i+m*e+v,a[13]=h*s+l*i+x*e+g,a[14]=r*s+d*i+p*e+y,a[15]=o*s+u*i+f*e+M,a}static xRotation(t,s){s=s||new this.MatType(16);var i=Math.cos(t),e=Math.sin(t);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i,s[6]=e,s[7]=0,s[8]=0,s[9]=-e,s[10]=i,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}static xRotate(t,s,i){i=i||new this.MatType(16);var e=t[4],a=t[5],n=t[6],h=t[7],r=t[8],o=t[9],c=t[10],l=t[11],d=Math.cos(s),u=Math.sin(s);return i[4]=d*e+u*r,i[5]=d*a+u*o,i[6]=d*n+u*c,i[7]=d*h+u*l,i[8]=d*r-u*e,i[9]=d*o-u*a,i[10]=d*c-u*n,i[11]=d*l-u*h,t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i}static yRotation(t,s){s=s||new this.MatType(16);var i=Math.cos(t),e=Math.sin(t);return s[0]=i,s[1]=0,s[2]=-e,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=e,s[9]=0,s[10]=i,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}static yRotate(t,s,i){i=i||new this.MatType(16);var e=t[0],a=t[1],n=t[2],h=t[3],r=t[8],o=t[9],c=t[10],l=t[11],d=Math.cos(s),u=Math.sin(s);return i[0]=d*e-u*r,i[1]=d*a-u*o,i[2]=d*n-u*c,i[3]=d*h-u*l,i[8]=d*r+u*e,i[9]=d*o+u*a,i[10]=d*c+u*n,i[11]=d*l+u*h,t!==i&&(i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i}static zRotation(t,s){s=s||new this.MatType(16);var i=Math.cos(t),e=Math.sin(t);return s[0]=i,s[1]=e,s[2]=0,s[3]=0,s[4]=-e,s[5]=i,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}static zRotate(t,s,i){i=i||new this.MatType(16);var e=t[0],a=t[1],n=t[2],h=t[3],r=t[4],o=t[5],c=t[6],l=t[7],d=Math.cos(s),u=Math.sin(s);return i[0]=d*e+u*r,i[1]=d*a+u*o,i[2]=d*n+u*c,i[3]=d*h+u*l,i[4]=d*r-u*e,i[5]=d*o-u*a,i[6]=d*c-u*n,i[7]=d*l-u*h,t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i}static axisRotation(t,s,i){i=i||new this.MatType(16);var e=t[0],a=t[1],n=t[2],h=Math.sqrt(e*e+a*a+n*n),r=(e/=h)*e,o=(a/=h)*a,c=(n/=h)*n,l=Math.cos(s),d=Math.sin(s),u=1-l;return i[0]=r+(1-r)*l,i[1]=e*a*u+n*d,i[2]=e*n*u-a*d,i[3]=0,i[4]=e*a*u-n*d,i[5]=o+(1-o)*l,i[6]=a*n*u+e*d,i[7]=0,i[8]=e*n*u+a*d,i[9]=a*n*u-e*d,i[10]=c+(1-c)*l,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}static axisRotate(t,s,i,e){e=e||new this.MatType(16);var a=s[0],n=s[1],h=s[2],r=Math.sqrt(a*a+n*n+h*h),o=(a/=r)*a,c=(n/=r)*n,l=(h/=r)*h,d=Math.cos(i),u=Math.sin(i),m=1-d,x=o+(1-o)*d,p=a*n*m+h*u,f=a*h*m-n*u,v=a*n*m-h*u,g=c+(1-c)*d,y=n*h*m+a*u,M=a*h*m+n*u,b=n*h*m-a*u,w=l+(1-l)*d,T=t[0],S=t[1],O=t[2],E=t[3],Y=t[4],A=t[5],C=t[6],X=t[7],L=t[8],P=t[9],D=t[10],R=t[11];return e[0]=x*T+p*Y+f*L,e[1]=x*S+p*A+f*P,e[2]=x*O+p*C+f*D,e[3]=x*E+p*X+f*R,e[4]=v*T+g*Y+y*L,e[5]=v*S+g*A+y*P,e[6]=v*O+g*C+y*D,e[7]=v*E+g*X+y*R,e[8]=M*T+b*Y+w*L,e[9]=M*S+b*A+w*P,e[10]=M*O+b*C+w*D,e[11]=M*E+b*X+w*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e}static scaling(t,s,i,e){return(e=e||new this.MatType(16))[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static scale(t,s,i,e,a){return(a=a||new this.MatType(16))[0]=s*t[0],a[1]=s*t[1],a[2]=s*t[2],a[3]=s*t[3],a[4]=i*t[4],a[5]=i*t[5],a[6]=i*t[6],a[7]=i*t[7],a[8]=e*t[8],a[9]=e*t[9],a[10]=e*t[10],a[11]=e*t[11],t!==a&&(a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a}static compose(t,s,i,e){e=e||new this.MatType(16);const a=s[0],n=s[1],h=s[2],r=s[3],o=a+a,c=n+n,l=h+h,d=a*o,u=a*c,m=a*l,x=n*c,p=n*l,f=h*l,v=r*o,g=r*c,y=r*l,M=i[0],b=i[1],w=i[2];return e[0]=(1-(x+f))*M,e[1]=(u+y)*M,e[2]=(m-g)*M,e[3]=0,e[4]=(u-y)*b,e[5]=(1-(d+f))*b,e[6]=(p+v)*b,e[7]=0,e[8]=(m+g)*w,e[9]=(p-v)*w,e[10]=(1-(d+x))*w,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}static inverse(t,s){s=s||new this.MatType(16);var i=t[0],e=t[1],a=t[2],n=t[3],h=t[4],r=t[5],o=t[6],c=t[7],l=t[8],d=t[9],u=t[10],m=t[11],x=t[12],p=t[13],f=t[14],v=t[15],g=u*v,y=f*m,M=o*v,b=f*c,w=o*m,T=u*c,S=a*v,O=f*n,E=a*m,Y=u*n,A=a*c,C=o*n,X=l*p,L=x*d,P=h*p,D=x*r,R=h*d,W=l*r,z=i*p,_=x*e,k=i*d,B=l*e,G=i*r,j=h*e,N=g*r+b*d+w*p-(y*r+M*d+T*p),F=y*e+S*d+Y*p-(g*e+O*d+E*p),V=M*e+O*r+A*p-(b*e+S*r+C*p),U=T*e+E*r+C*d-(w*e+Y*r+A*d),I=1/(i*N+h*F+l*V+x*U);return s[0]=I*N,s[1]=I*F,s[2]=I*V,s[3]=I*U,s[4]=I*(y*h+M*l+T*x-(g*h+b*l+w*x)),s[5]=I*(g*i+O*l+E*x-(y*i+S*l+Y*x)),s[6]=I*(b*i+S*h+C*x-(M*i+O*h+A*x)),s[7]=I*(w*i+Y*h+A*l-(T*i+E*h+C*l)),s[8]=I*(X*c+D*m+R*v-(L*c+P*m+W*v)),s[9]=I*(L*n+z*m+B*v-(X*n+_*m+k*v)),s[10]=I*(P*n+_*c+G*v-(D*n+z*c+j*v)),s[11]=I*(W*n+k*c+j*m-(R*n+B*c+G*m)),s[12]=I*(P*u+W*f+L*o-(R*f+X*o+D*u)),s[13]=I*(k*f+X*a+_*u-(z*u+B*f+L*a)),s[14]=I*(z*o+j*f+D*a-(G*f+P*a+_*o)),s[15]=I*(G*u+R*a+B*o-(k*o+j*u+W*a)),s}static transformVector(t,s,i){i=i||new this.MatType(4);for(var e=0;e<4;++e){i[e]=0;for(var a=0;a<4;++a)i[e]+=s[a]*t[4*a+e]}return i}static transformPoint(t,s,i){i=i||new this.MatType(3);var e=s[0],a=s[1],n=s[2],h=e*t[3]+a*t[7]+n*t[11]+t[15];return i[0]=(e*t[0]+a*t[4]+n*t[8]+t[12])/h,i[1]=(e*t[1]+a*t[5]+n*t[9]+t[13])/h,i[2]=(e*t[2]+a*t[6]+n*t[10]+t[14])/h,i}static transformDirection(t,s,i){i=i||new this.MatType(3);var e=s[0],a=s[1],n=s[2];return i[0]=e*t[0]+a*t[4]+n*t[8],i[1]=e*t[1]+a*t[5]+n*t[9],i[2]=e*t[2]+a*t[6]+n*t[10],i}static transformNormal(t,s,i){i=i||new this.MatType(3);var e=this.inverse(t),a=s[0],n=s[1],h=s[2];return i[0]=a*e[0]+n*e[1]+h*e[2],i[1]=a*e[4]+n*e[5]+h*e[6],i[2]=a*e[8]+n*e[9]+h*e[10],i}static copy(t,s){return(s=s||new this.MatType(16))[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}}).MatType=Float32Array,T);function O(t,s,i){const e=t.createShader(s);return e&&(t.shaderSource(e,i),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS))?e:(t.deleteShader(e),null)}function E(t,s){let i,e=0,a=s.length;for(;e<a;)i=2*Math.floor((e+a)/4),t<=s[i]?a=i:e=i+2;return e>s.length-1?e-2:e}class Y{constructor(t,s,i,e){this.name=t,this.chart=s,this.data=i,this.label=e,this.m4=S,this.gl=null,this.translationMatrix=this.m4.translation(0,0,0),this.scaleMatrix=this.m4.scaling(1,1,1),this.matrix=null,this.scaleX=1,this.scaleY=1,this.translateX=0,this.translateY=0,this.xDisabled=!1,this.yDisabled=!1,this.minY=null,this.maxY=null,this.autoYScale=!1,this.axisSeries=null,this.num=-1,this.gl=s.gl}resetY(){this.minY=null,this.maxY=null,this.translateY=0,this.scaleY=1,this.scaleMatrix[5]=1,this.scaleMatrix[13]=0,this.translationMatrix[13]=0,this.autoYScale=!1}resetX(){this.translateX=0,this.scaleX=1,this.translationMatrix[12]=0,this.scaleMatrix[12]=0}reset(t){switch(t){case"x":this.resetX();break;case"y":this.resetY();break;default:this.resetX(),this.resetY()}}multiply(t){const{m4:s,translationMatrix:i,scaleMatrix:e}=this;return this.matrix=s.multiply(t,i),this.matrix=s.multiply(this.matrix,e),this.matrix}getMatrix(){return this.matrix}getTransformData(){return{translateX:this.translationMatrix[12],translateY:this.translationMatrix[13],scaleX:this.scaleMatrix[0],scaleY:this.scaleMatrix[5],originX:this.scaleMatrix[12],originY:this.scaleMatrix[13],minY:this.minY||0,maxY:this.maxY||0}}stopmove(t,s){t=this.xDisabled?0:t,s=this.yDisabled?0:s;const{chart:i,m4:e}=this;t&&(this.translateX=this.translateX+t),s&&(this.translateY=this.translateY-s),this.translationMatrix=e.translation(this.translateX,this.translateY,0),window.requestAnimationFrame(i.drawSeries.bind(i))}move(t,s){t=this.xDisabled?0:t,s=this.yDisabled?0:s;const{chart:i,m4:e,translateX:a,translateY:n}=this;this.translationMatrix=e.translation(a+t,n-s,0),this.autoYScale&&this.recalculateMinMax(),window.requestAnimationFrame((()=>{i.drawSeries.bind(i)()}))}translate(t,s){const{chart:i,m4:e}=this;t&&(this.translateX=t),s&&(this.translateY=s),this.translationMatrix=e.translation(this.translateX,this.translateY,0),window.requestAnimationFrame(i.drawSeries.bind(i))}resize(t,s){this.scale(t*this.scaleX,s*this.scaleY,0,0,!1)}scale(t,s,i,e,a){const{chart:n,m4:h,translateX:r,translateY:o}=this;void 0===a&&(a=!0);const c=h.inverse(this.scaleMatrix),l=h.transformPoint(c,[i-r,-1*(e+o),0]);t&&(this.scaleX=t),s&&(this.scaleY=s),this.scaleMatrix=h.translate(this.scaleMatrix,l[0],l[1],0),this.scaleMatrix[0]=this.scaleX,this.scaleMatrix[5]=this.scaleY,this.scaleMatrix=h.translate(this.scaleMatrix,-l[0],-l[1],0),a&&window.requestAnimationFrame(n.drawSeries.bind(n))}zoomIn(t,s,i,e){var a;if(!this.gl)return;const n=this.gl.canvas.height/((null===(a=this.axisSeries)||void 0===a?void 0:a.length)||1);t=this.xDisabled?0:t,s=this.yDisabled?0:s,i=this.xDisabled?0:i,e=this.yDisabled?-this.gl.canvas.height/2+n/2:e,this.scaleX=this.scaleX+this.scaleX*t,this.scaleY=this.scaleY+this.scaleY*s,this.autoYScale&&this.recalculateMinMax(),this.scale(this.scaleX,this.scaleY,i,e)}zoomOut(t,s,i,e){var a;if(!this.gl)return;const n=this.gl.canvas.height/((null===(a=this.axisSeries)||void 0===a?void 0:a.length)||1);t=this.xDisabled?0:t,s=this.yDisabled?0:s,i=this.xDisabled?0:i,e=this.yDisabled?-this.gl.canvas.height/2+n/2:e,this.scaleX=this.scaleX-this.scaleX*t,this.scaleY=this.scaleY-this.scaleY*s,this.scale(this.scaleX,this.scaleY,i,e),this.autoYScale&&this.recalculateMinMax()}touchScale(t,s,i){this.scaleX=this.scaleX*t,this.scale(this.scaleX,this.scaleY,s,0,!1),this.move(i,0)}disable(t,s){"x"===t?this.xDisabled=s:this.yDisabled=s}setAutoScaleY(t){this.autoYScale=t}setAxisSeries(t,s){this.axisSeries=t,this.num=s}recalculateMinMax(){if(!this.gl)return;let t=-this.translationMatrix[12]/this.scaleMatrix[0]-this.scaleMatrix[12]/this.scaleMatrix[0],s=t+this.gl.canvas.width/this.scaleMatrix[0],i=E(t,this.data.data),e=E(s,this.data.data);i=i-2<1?1:i-3,e=e+2>this.data.data.length?this.data.data.length-1:e+1;let a=this.data.data[i],n=this.data.data[i];for(let t=i+2;t<=e;t+=2)a=Math.min(a,this.data.data[t]),n=Math.max(n,this.data.data[t]);if(a-=Math.abs(n-a)*d,n+=Math.abs(n-a)*d,this.axisSeries){const t=this.gl.canvas.height/this.axisSeries.length;a===this.minY&&n===this.maxY||(this.minY=a,this.maxY=n,this.scaleMatrix[5]=this.scaleY=t/(this.maxY-this.minY),this.translationMatrix[13]=this.translateY=(-(this.maxY-this.minY)/2-this.minY)*this.scaleY+t*(this.axisSeries.length/2)+t/2-t*(this.num+1))}}convertClientPtToSeriesPt(t,s){return{x:-this.translationMatrix[12]/this.scaleMatrix[0]-this.scaleMatrix[12]/this.scaleMatrix[0]+t/this.scaleMatrix[0],y:-this.translationMatrix[13]/this.scaleMatrix[5]-this.scaleMatrix[13]/this.scaleMatrix[5]-s/this.scaleMatrix[5]+.5*this.chart.canvas.height/this.scaleMatrix[5]}}getClientDistance(t,s,i,e){return Math.sqrt(Math.pow((i-t)*this.scaleMatrix[0],2)+Math.pow((e-s)*this.scaleMatrix[5],2))}searchNearbyPoint(t,s,i){const{x:e,y:a}=this.convertClientPtToSeriesPt(t,s);let n=E(e,this.data.data),h={x:this.data.data[n],y:this.data.data[n+1]},r=n+2<this.data.data.length?{x:this.data.data[n+2],y:this.data.data[n+3]}:null,o=n-2>-1?{x:this.data.data[n-2],y:this.data.data[n-1]}:null,c=h,l=this.getClientDistance(h.x,h.y,e,a),d=null,u=null;return r&&(d=this.getClientDistance(r.x,r.y,e,a),d<l&&(l=d,c=r)),o&&(u=this.getClientDistance(o.x,o.y,e,a),u<l&&(l=u,c=o)),l<i?{point:c,label:this.label}:void 0}}class A{constructor(t){this.all=[],this.yAxes={left:[],right:[]},this.xAxes={top:[],bottom:[]},this.series={},this.chart=t}add({refX:t,refY:s,id:i,data:e,label:a}){const n=new Y(t+s+i,this.chart,e,a);this.series[t+s+i]=n,this.yAxes[s].push(n),this.xAxes[t].push(n),this.all.push(n)}forEach(t,s,i){void 0===s?this.all.forEach(t):("x"!==s||"top"!==i&&"bottom"!==i||this.xAxes[i].forEach(t),"y"!==s||"left"!==i&&"right"!==i||this.yAxes[i].forEach(t))}getOneAxis(t,s){return"x"!==t||"top"!==s&&"bottom"!==s?"y"!==t||"left"!==s&&"right"!==s?null:this.yAxes[s][0]:this.xAxes[s][0]}clear(){this.all=[],this.yAxes={left:[],right:[]},this.xAxes={top:[],bottom:[]},this.series={}}}class C extends x{constructor(t){super(t,t.axesMatricesCtrl),this.offset=new DOMRect(0,0,0,0),this.bindHandlers()}bindHandlers(){this.handlerMouseDown=this.handlerMouseDown.bind(this),this.handlerMouseMove=this.handlerMouseMove.bind(this),this.handlerMouseUp=this.handlerMouseUp.bind(this),this.handlerWheel=this.handlerWheel.bind(this),this.handlerTouchStart=this.handlerTouchStart.bind(this),this.handlerTouchMove=this.handlerTouchMove.bind(this),this.handlerTouchEnd=this.handlerTouchEnd.bind(this),this.chart.canvas.addEventListener("mousedown",this.handlerMouseDown),this.chart.canvas.addEventListener("wheel",this.handlerWheel),this.chart.canvas.addEventListener("touchstart",this.handlerTouchStart),this.chart.canvas.addEventListener("touchmove",this.handlerTouchMove),this.chart.canvas.addEventListener("touchend",this.handlerTouchEnd),this.offset=this.chart.canvas.getBoundingClientRect()}unbindHandlers(){this.chart.canvas.removeEventListener("mousedown",this.handlerMouseDown),this.chart.canvas.removeEventListener("wheel",this.handlerWheel),this.chart.canvas.removeEventListener("touchstart",this.handlerTouchStart),this.chart.canvas.removeEventListener("touchmove",this.handlerTouchMove),this.chart.canvas.removeEventListener("touchend",this.handlerTouchEnd)}handlerMouseDown(t){this.panStart({clientX:t.pageX-this.offset.left,clientY:t.pageY-this.offset.top}),document.addEventListener("mousemove",this.handlerMouseMove),document.addEventListener("mouseup",this.handlerMouseUp)}handlerMouseMove(t){this.isTranslate&&(this.pan({clientX:t.pageX-this.offset.left,clientY:t.pageY-this.offset.top}),this.chart.options.axes.forEach((t=>t.update())))}handlerMouseUp(t){this.isTranslate&&(this.panEnd({clientX:t.pageX-this.offset.left,clientY:t.pageY-this.offset.top}),document.removeEventListener("mousemove",this.handlerMouseMove),document.removeEventListener("mouseup",this.handlerMouseUp))}handlerWheel(t){t.deltaY>0?(this.matricesCtrl.forEach((s=>s.zoomOut(t.shiftKey?0:.1,t.shiftKey?.1:0,t.pageX-this.offset.left,t.pageY-this.offset.top-this.chart.canvas.height/2))),this.chart.options.axes.forEach((t=>t.update()))):(this.matricesCtrl.forEach((s=>s.zoomIn(t.shiftKey?0:.1,t.shiftKey?.1:0,t.pageX-this.offset.left,t.pageY-this.offset.top-this.chart.canvas.height/2))),this.chart.options.axes.forEach((t=>t.update())))}handlerTouchStart(t){1===t.touches.length&&this.panStart(t.touches[0]),t.touches.length>1&&(this.panEnd(t.touches[0]),this.scaleStart(t.touches))}handlerTouchMove(t){t.touches.length>0&&(this.isTranslate&&1===t.touches.length&&this.pan(t.touches[0]),t.touches.length>1&&this.scaleTo(t.touches),this.chart.options.axes.forEach((t=>t.update())))}handlerTouchEnd(t){this.isTranslate&&1===t.changedTouches.length&&this.panEnd(t.changedTouches[0]),t.touches.length&&t.touches.length<2&&this.scaleStop(t.touches)}}class X{constructor(t){let s,i;if("Array"===t.constructor.name?this.data=new Float32Array(t):this.data=t,this.data.length>2){s={min:this.data[0],max:this.data[0]},i={min:this.data[1],max:this.data[1]};for(let t=2;t<this.data.length;t+=2)s.min=Math.min(s.min,this.data[t]),s.max=Math.max(s.max,this.data[t]),i.min=Math.min(i.min,this.data[t+1]),i.max=Math.max(i.max,this.data[t+1]);this.minmaxX=s,this.minmaxY=i}else this.minmaxX={min:0,max:0},this.minmaxY={min:0,max:0}}getData(){return this.data}}class L extends class{constructor(t,s){this.m4=S,this.primitiveType=0,this.series=[],this.dataCount=0,this.projectionMatrix=this.m4.translation(0,0,0),this.positionAttributeLocation=null,this.matrixLocation=null,this.colorUniformLocation=null,this.axesMatricesCtrl=new A(this),this.canvas=t,this.options=s.options,this.gl=t.getContext("webgl",{powerPreference:"high-performance"}),this.gl?(s.chart=this,s.setProp&&s.setProp(Object.assign({},s)),this.panScale=new C(this)):console.error("Браузер не поддерживает webgl")}destroy(){this.panScale&&this.panScale.destroy()}getGL(){return this.gl}clear(){this.gl&&(this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT))}setSize(){const{gl:t,m4:s}=this;t&&(function(t,s){s=s||1;const i=t.clientWidth*s|0,e=t.clientHeight*s|0;(t.width!==i||t.height!==e)&&(t.width=i,t.height=e)}(t.canvas),t.viewport(0,0,t.canvas.width,t.canvas.height),this.projectionMatrix=s.orthographic(0,t.canvas.clientWidth,-t.canvas.clientHeight/2,t.canvas.clientHeight-t.canvas.clientHeight/2,-1,1),this.axesMatricesCtrl.forEach((t=>t.multiply(this.projectionMatrix))))}setColor(t){if(this.gl){const s=function(t){let s=document.createElement("div");s.style.color=t,document.body.appendChild(s);let i=window.getComputedStyle(s).getPropertyValue("color");document.body.removeChild(s);const[,e,a,n,h]=i.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||[];return[+e/255,+a/255,+n/255,void 0!==h?Number(h):1]}(t);this.gl.uniform4f(this.colorUniformLocation,...s)}}resize(t){if(this.gl){const t=this.gl.canvas.clientWidth/this.gl.canvas.width,s=this.gl.canvas.clientHeight/this.gl.canvas.height;this.setSize(),this.axesMatricesCtrl.forEach((i=>i.resize(t,s))),window.requestAnimationFrame(this.drawSeries.bind(this)),this.options.axes.forEach((t=>t.update()))}}setSeries(t){this.axesMatricesCtrl.clear(),this.series=[],t.forEach(((t,s)=>{const i={id:s+1,data:new X(t.data),refX:t.refX||"bottom",refY:t.refY||"left",color:t.color,label:t.label};this.axesMatricesCtrl.add(i),this.series.push(i)})),this.options.series=this.series,this.drawSeries()}draw(t){const{gl:s,projectionMatrix:i,matrixLocation:e,dataCount:a}=this;if(s){s.uniformMatrix4fv(e,!1,t.multiply(i));const n=0;s.drawArrays(this.primitiveType,n,a)}}drawSeries(){this.series&&this.series.forEach((t=>{void 0!==t.data.getData&&(this.setColor(t.color),this.setData(t.data.getData()),this.draw(this.axesMatricesCtrl.series[t.refX+t.refY+t.id]))}))}setData(t){}}{constructor(t,s){super(t,s),this.gl&&(this.primitiveType=this.gl.LINE_STRIP,this.initGl(),this.setSize())}initGl(){const{gl:t}=this;if(!t)return;const s=O(t,t.VERTEX_SHADER,"attribute vec2 a_position;\r\nuniform mat4 u_matrix;\r\n\r\nvoid main() {\r\n  gl_Position = vec4((u_matrix * vec4(a_position, 1, 1)).xy, 0, 1);\r\n  //размер точки если gl.POINT\r\n  gl_PointSize = 3.5;\r\n}"),i=O(t,t.FRAGMENT_SHADER,"precision mediump float;\r\n\r\nuniform vec4 u_color;\r\n\r\nvoid main() {\r\n  gl_FragColor = u_color;\r\n}");if(!s)return void console.log("(WebGL) Шейдер не создан(vertex)");if(!i)return void console.log("(WebGL) Шейдер не создан(fragment)");const e=function(t,s,i){const e=t.createProgram();if(e){if(t.attachShader(e,s),t.attachShader(e,i),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS))return e;t.deleteProgram(e)}return null}(t,s,i);if(!e)return void console.log("(WebGL) Программа не создана");this.positionAttributeLocation=t.getAttribLocation(e,"a_position"),this.matrixLocation=t.getUniformLocation(e,"u_matrix"),this.colorUniformLocation=t.getUniformLocation(e,"u_color");const a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.useProgram(e),t.enableVertexAttribArray(this.positionAttributeLocation),t.bindBuffer(t.ARRAY_BUFFER,a)}setData(t){const{gl:s,positionAttributeLocation:i}=this;if(!s||null===i)return;this.dataCount=t.length/2;const e=s.FLOAT;s.vertexAttribPointer(i,2,e,!1,0,0),s.bufferData(s.ARRAY_BUFFER,t,s.STATIC_DRAW)}}const P=({series:i,sizeCanvas:e})=>{const a=(0,s.useContext)(n),h=(0,s.useRef)(null),[r,o]=(0,s.useState)(null),c=function(t){const[i,e]=(0,s.useState)(null);return(0,s.useLayoutEffect)((()=>{const s=t.current,a=new ResizeObserver((t=>{t.forEach((t=>{const s=t.target;var a;a=[s.width,s.height],i&&a[0]===i[0]&&a[1]===i[1]||e(a)}))}));return a.observe(s),()=>a.unobserve(s)}),[t]),i}(h);return(0,s.useLayoutEffect)((()=>{if(a){let t;const s=h.current;s&&!r&&a.setProp&&(t=new L(s,a),o(t))}}),[r,a]),(0,s.useEffect)((()=>{r&&a&&a.setProp&&(r.setSeries(i),a.setProp(Object.assign({},a)))}),[r,i]),(0,s.useEffect)((()=>{c&&r&&a&&a.setResizeCanvas&&(a.setResizeCanvas(c),r.resize(c))}),[r,c,a]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",Object.assign({className:"chart-gl-canvas"},{children:(0,t.jsx)("canvas",{id:"chart-lines",ref:h,style:{width:"100%",height:"100%",position:"absolute"}})}))})},D=({className:i,align:e,children:a,style:h})=>{const r=(0,s.useContext)(n);return(0,s.useEffect)((()=>{r&&(r.options.areaGrid[`${e}Title`]="max-content")}),[e]),(0,t.jsx)("div",Object.assign({className:(i?i+" ":"")+`chart-${e}-title`,style:h||{}},{children:a}))};D.propTypes={align:o().oneOf(["top","left","bottom","right"]).isRequired};const R=D;function W(t){const i=(0,s.useContext)(n),e=i&&i.chart,[a,h]=(0,s.useState)({mousepoint:{x:0,y:0}}),r=s=>{const i=null==e?void 0:e.canvas.getBoundingClientRect();if(i){const a={x:s.pageX,y:s.pageY},n={};null==e||e.axesMatricesCtrl.forEach((s=>{const e=s.searchNearbyPoint(a.x-i.left,a.y-i.top,t);e&&(n[s.name]=e)})),Object.keys(n).length?h({mousepoint:a,nearestPoint:n}):h({mousepoint:a})}};return(0,s.useEffect)((()=>(e&&e.canvas.addEventListener("mousemove",r),()=>{e&&e.canvas.removeEventListener("mousemove",r)})),[e]),a}})(),module.exports=e})();